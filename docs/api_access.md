## API Usage

There is currently a limited and still under development (i.e. subject to change) API for programatically accessing the film data and associated metadata. The API consists simply of various GET requests you can make that will return JSON-formatted responses or a film image.

No authentication or special permissions are required to use the API features documented here. In the unlikely event you run into rate limiting issues, reach out to Thomas.

**Because this API is subject to change at any time, please reach out to Thomas in advance if you're using it for anything significant. If you do this and I know what you're working on, I'll do my best to avoid breaking anything you use and can consult with you on potential future changes. If not, consider anything you're using at potential risk of breaking without warning and proceed with caution.**

### Accessing data for individual film segments

If you know the segment ID of an individual film segment, you can get its metadata with a query like this:

`https://www.radarfilm.studio/api/segments/1116`

(where `1116` is an example segment ID)

You can also explore the metadat version history this way. For example, to see the original metadata (imported from automated OCR, before any human retouching), you can do:

`https://www.radarfilm.studio/api/segments/1116/version/0`

You can access JPG and TIFF versions of the associated radargram like this:

`https://www.radarfilm.studio/api/radargram/jpg/1116`
`https://www.radarfilm.studio/api/radargram/tiff/1116`

The JPG interface supports some additional features, such as rescaling. You can specify a maximum height (100 pixels, in this case) and the radargram will be automatically rescaled, maintaining the original aspect ratio:

`https://www.radarfilm.studio/api/radargram/jpg/1116/h/100`

Note that if you ask for unmodified images (the first two examples), you'll get a redirect directly to the AWS or Google Cloud Storage location of the asset. In the vast majority of cases, whatever you're using to pull the data should handle this transparently. The benefit of this is that it saves us a ton on bandwidth and gives you much faster access to the data.

## Finding segment IDs

Logged in users will see a link at the top to a "query" page. This page is actually accessible to all users at [this link](https://www.radarfilm.studio/query), though there are some limits to what unauthenticated users can do. The recommended way to explore the query API is to play with building a query on this page. Queries to find relevant segments are simply GET requests to this URL. For example, I could select some data from Flight 37 like this:

`https://www.radarfilm.studio/query?flight=37&reel=&verified=&scope=&dataset=&mincbd=&maxcbd=&minframe=4000&maxframe=&sort=cbd&n=10&history=0`

This URL can be most easily generated by playing with the tools on the query page, though it can obviously be programatically generated as well. In order to get a machine-readable version of this, simply change `/query?` to `/api/query?`. Behind the scenes, these routes call the same code, so the results returned should be identical, except that the API version ignores pagination. For example, you'd query:

`https://www.radarfilm.studio/api/query?flight=37&reel=&verified=&scope=&dataset=&mincbd=&maxcbd=&minframe=4000&maxframe=&sort=cbd&n=10&history=0`

Note that this does not return the images themselves. You'll need to use the tools in the previous section to get those individually.

If you only need the segment IDs and not the entire metadata, you can also request that by adding `&ids_only=1` to the end of your request. This will return a list of segment IDs only. For example:

`https://www.radarfilm.studio/api/query?flight=37&reel=&verified=&scope=&dataset=&mincbd=&maxcbd=&minframe=4000&maxframe=&sort=cbd&n=10&history=0&ids_only=1`

Alternatively, starting from a single radargram, it is also possible to use the API to traverse by frame or by CBD number, using the `next_by_frame`/`prev_by_frame` and `next_by_cbd`/`prev_by_cbd` fields in the JSON response. (You can try this out using the similarly named buttons on the website.) This may not be an extremely reliable way of extracting a flight line, however, and some sanity checking will probably be necessary.